(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{388:function(t,a,s){"use strict";s.r(a);var e=s(44),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"http中的cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#http中的cookie"}},[t._v("#")]),t._v(" http中的cookie")]),t._v(" "),s("h3",{attrs:{id:"_1-作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-作用"}},[t._v("#")]),t._v(" 1. 作用")]),t._v(" "),s("p",[t._v("由于http是无状态协议，cookie 使用来存储,cookie来保存用户的身份信息")]),t._v(" "),s("h3",{attrs:{id:"_2-cookie的属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-cookie的属性"}},[t._v("#")]),t._v(" 2. cookie的属性")]),t._v(" "),s("h4",{attrs:{id:"_2-1-httponly"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-httponly"}},[t._v("#")]),t._v(" 2.1  HttpOnly")]),t._v(" "),s("p",[t._v("cookie只允许在服务端获取,在客户端无法通过js读取,可以用在防止xss攻击获取用户cookie")]),t._v(" "),s("h4",{attrs:{id:"_2-2-samesite"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-samesite"}},[t._v("#")]),t._v(" 2.2  SameSite")]),t._v(" "),s("p",[t._v("value:\nStrict 跨站点时任何情况不会发送cookie "),s("br"),t._v("\nLax "),s("br"),t._v(" "),s("img",{attrs:{src:"http://r7dp9h802.hn-bkt.clouddn.com/same-stie.png",alt:""}}),t._v("\nNone 取消限制，但是只能在secure（https开启的条件）下生效 "),s("br")]),t._v(" "),s("h4",{attrs:{id:"_2-3-path"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-path"}},[t._v("#")]),t._v(" 2.3 path")]),t._v(" "),s("p",[t._v("默认为/,cookie设置同源的属性")]),t._v(" "),s("h4",{attrs:{id:"_2-4-secure"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-secure"}},[t._v("#")]),t._v(" 2.4 secure")]),t._v(" "),s("p",[t._v("指定cookie只能通过https连接时获取")]),t._v(" "),s("h4",{attrs:{id:"_2-5-domain"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-domain"}},[t._v("#")]),t._v(" 2.5 Domain")]),t._v(" "),s("p",[t._v("指定cookie在哪些子域下获取，例如让cookie只能在a.test.com上访问，但是在b.test.com上无法获取，可以设置domain: a.test.com")]),t._v(" "),s("h4",{attrs:{id:"_2-6-cookie名称"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-cookie名称"}},[t._v("#")]),t._v(" 2.6 cookie名称")]),t._v(" "),s("h4",{attrs:{id:"_2-7-cookie值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-7-cookie值"}},[t._v("#")]),t._v(" 2.7 cookie值")]),t._v(" "),s("h4",{attrs:{id:"_2-8-expires"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-8-expires"}},[t._v("#")]),t._v(" 2.8 Expires")]),t._v(" "),s("p",[t._v("cookie的过期时间")]),t._v(" "),s("h3",{attrs:{id:"向上匹配同源政策"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#向上匹配同源政策"}},[t._v("#")]),t._v(" 向上匹配同源政策")]),t._v(" "),s("p",[t._v("如果用户在test.com上面,只能https访问，由于https是非明文的加密通信方式，用户登录后，我们诱导用户点击链接，链接里面有图片,")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://sub.test.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),s("p",[t._v("这时候我们就获得了一个明文cookie,在domain的向上匹配同源策略,sub.test.com的cookie会更优先")]),t._v(" "),s("h3",{attrs:{id:"如何修改cookie"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何修改cookie"}},[t._v("#")]),t._v(" 如何修改cookie")]),t._v(" "),s("ol",[s("li",[t._v("浏览器端，在非httpOnly下，js直接获取document.domain获取")]),t._v(" "),s("li",[t._v("服务器端，请求通过set-cookie")])]),t._v(" "),s("h3",{attrs:{id:"withcredentials"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#withcredentials"}},[t._v("#")]),t._v(" withCredentials")]),t._v(" "),s("p",[t._v("这个属性决定，跨域是否携带cookie")]),t._v(" "),s("h3",{attrs:{id:"cookie安全"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cookie安全"}},[t._v("#")]),t._v(" cookie安全")]),t._v(" "),s("h4",{attrs:{id:"csrf"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#csrf"}},[t._v("#")]),t._v(" CSRF")])])}),[],!1,null,null,null);a.default=r.exports}}]);